{
  "info": {
    "name": "Boilerplate NestJS",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Complete API collection for the NestJS Boilerplate. Includes all endpoints organized by module with authentication support."
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/v1",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Check Application Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health-check",
              "host": ["{{baseUrl}}"],
              "path": ["health-check"]
            },
            "description": "Returns the application health status including database and Redis connectivity."
          }
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var response = pm.response.json();",
                  "if (response.data) {",
                  "  pm.collectionVariables.set('accessToken', response.data.accessToken);",
                  "  pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"Admin@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Authenticates the user with email and password. Automatically saves the accessToken and refreshToken to collection variables."
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var response = pm.response.json();",
                  "if (response.data) {",
                  "  pm.collectionVariables.set('accessToken', response.data.accessToken);",
                  "  pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Generates a new access token using the refresh token. Automatically updates collection variables."
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Revokes all refresh tokens and invalidates the current access token."
          }
        },
        {
          "name": "Logout All Devices",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/logout-all",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout-all"]
            },
            "description": "Revokes all refresh tokens for the user across all devices."
          }
        },
        {
          "name": "Request Password Reset",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/password/request-reset",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "password", "request-reset"]
            },
            "description": "Sends a password reset token to the user's email. Limited to 3 attempts per minute."
          }
        },
        {
          "name": "Confirm Password Reset",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset-token-received-by-email\",\n  \"newPassword\": \"NewPassword@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/password/confirm-reset",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "password", "confirm-reset"]
            },
            "description": "Confirms the password change using the token received by email. Limited to 5 attempts per minute."
          }
        },
        {
          "name": "Social Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var response = pm.response.json();",
                  "if (response.data) {",
                  "  pm.collectionVariables.set('accessToken', response.data.accessToken);",
                  "  pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accessToken\": \"supabase-access-token-from-frontend\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/social",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "social"]
            },
            "description": "Authenticates the user using a Supabase access token obtained after social login (Google, GitHub, etc.) in the frontend."
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"SecurePass@123\",\n  \"name\": \"New User\",\n  \"userType\": \"user\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user",
              "host": ["{{baseUrl}}"],
              "path": ["user"]
            },
            "description": "Creates a new user account. No authentication required."
          }
        },
        {
          "name": "Update Current User",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/me",
              "host": ["{{baseUrl}}"],
              "path": ["user", "me"]
            },
            "description": "Updates the currently authenticated user's profile."
          }
        },
        {
          "name": "Update User by ID",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"userType\": \"global\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/:userId",
              "host": ["{{baseUrl}}"],
              "path": ["user", ":userId"],
              "variable": [
                { "key": "userId", "value": "user-uuid-here" }
              ]
            },
            "description": "Updates a user by ID. Requires ADMIN role."
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/me",
              "host": ["{{baseUrl}}"],
              "path": ["user", "me"]
            },
            "description": "Returns the profile of the currently authenticated user."
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/user/:userId",
              "host": ["{{baseUrl}}"],
              "path": ["user", ":userId"],
              "variable": [
                { "key": "userId", "value": "user-uuid-here" }
              ]
            },
            "description": "Returns a user's public profile by ID. No authentication required."
          }
        },
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/user?take=10&skip=0&sort=createdAt&order=DESC",
              "host": ["{{baseUrl}}"],
              "path": ["user"],
              "query": [
                { "key": "take", "value": "10", "description": "Number of records per page (max 100)" },
                { "key": "skip", "value": "0", "description": "Number of records to skip" },
                { "key": "search", "value": "", "description": "Search by name or email", "disabled": true },
                { "key": "sort", "value": "createdAt", "description": "Field to sort by" },
                { "key": "order", "value": "DESC", "description": "Sort direction: ASC or DESC" }
              ]
            },
            "description": "Returns a paginated list of all users. Supports search, sorting and pagination."
          }
        },
        {
          "name": "Delete Current User",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/me",
              "host": ["{{baseUrl}}"],
              "path": ["user", "me"]
            },
            "description": "Soft deletes the currently authenticated user's account."
          }
        },
        {
          "name": "Delete User by ID",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/:userId",
              "host": ["{{baseUrl}}"],
              "path": ["user", ":userId"],
              "variable": [
                { "key": "userId", "value": "user-uuid-here" }
              ]
            },
            "description": "Soft deletes a user by ID. Requires ADMIN role."
          }
        }
      ]
    },
    {
      "name": "Feature Flags",
      "item": [
        {
          "name": "Create Feature Flag",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"key\": \"new_feature\",\n  \"name\": \"New Feature\",\n  \"description\": \"Description of the new feature\",\n  \"active\": false,\n  \"rolloutPercentage\": 100,\n  \"allowedUserTypes\": [\"admin\", \"global\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/feature-flags",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags"]
            },
            "description": "Creates a new feature flag. Requires ADMIN role."
          }
        },
        {
          "name": "Toggle Feature Flag",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags/:id/toggle",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", ":id", "toggle"],
              "variable": [
                { "key": "id", "value": "feature-flag-uuid-here" }
              ]
            },
            "description": "Toggles the active status of a feature flag. Requires ADMIN role."
          }
        },
        {
          "name": "Update Feature Flag",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Feature Name\",\n  \"description\": \"Updated description\",\n  \"active\": true,\n  \"rolloutPercentage\": 50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/feature-flags/:id",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", ":id"],
              "variable": [
                { "key": "id", "value": "feature-flag-uuid-here" }
              ]
            },
            "description": "Updates an existing feature flag. Requires ADMIN role."
          }
        },
        {
          "name": "Check Feature Flag by Key",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags/check/:key",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", "check", ":key"],
              "variable": [
                { "key": "key", "value": "new_feature" }
              ]
            },
            "description": "Checks whether a specific feature flag is active for the current user."
          }
        },
        {
          "name": "Check All Feature Flags",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags/check",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", "check"]
            },
            "description": "Returns the status of all feature flags for the current user."
          }
        },
        {
          "name": "List Feature Flags",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags?take=10&skip=0",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags"],
              "query": [
                { "key": "take", "value": "10", "description": "Number of records per page" },
                { "key": "skip", "value": "0", "description": "Number of records to skip" }
              ]
            },
            "description": "Returns a paginated list of all feature flags. Requires ADMIN or GLOBAL role."
          }
        },
        {
          "name": "Get Feature Flag by ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags/:id",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", ":id"],
              "variable": [
                { "key": "id", "value": "feature-flag-uuid-here" }
              ]
            },
            "description": "Returns a feature flag by ID. Requires ADMIN or GLOBAL role."
          }
        },
        {
          "name": "Delete Feature Flag",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/feature-flags/:id",
              "host": ["{{baseUrl}}"],
              "path": ["feature-flags", ":id"],
              "variable": [
                { "key": "id", "value": "feature-flag-uuid-here" }
              ]
            },
            "description": "Deletes a feature flag by ID. Requires ADMIN role."
          }
        }
      ]
    },
    {
      "name": "File Upload",
      "item": [
        {
          "name": "Upload Single File",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "file", "type": "file", "src": "", "description": "File to upload" }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/files/upload?folder=avatars",
              "host": ["{{baseUrl}}"],
              "path": ["files", "upload"],
              "query": [
                { "key": "folder", "value": "avatars", "description": "Folder name in storage (optional)" }
              ]
            },
            "description": "Uploads a single file to Supabase Storage. Returns the file record with public URL."
          }
        },
        {
          "name": "Upload Multiple Files",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "files", "type": "file", "src": "", "description": "File 1" },
                { "key": "files", "type": "file", "src": "", "description": "File 2" }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/files/upload/multiple?folder=documents",
              "host": ["{{baseUrl}}"],
              "path": ["files", "upload", "multiple"],
              "query": [
                { "key": "folder", "value": "documents", "description": "Folder name in storage (optional)" }
              ]
            },
            "description": "Uploads multiple files (max 10) to Supabase Storage. Returns an array of file records."
          }
        },
        {
          "name": "List User Files",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/files?take=10&skip=0",
              "host": ["{{baseUrl}}"],
              "path": ["files"],
              "query": [
                { "key": "take", "value": "10", "description": "Number of records per page" },
                { "key": "skip", "value": "0", "description": "Number of records to skip" }
              ]
            },
            "description": "Returns a paginated list of files uploaded by the current user."
          }
        },
        {
          "name": "Get File by ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/:id",
              "host": ["{{baseUrl}}"],
              "path": ["files", ":id"],
              "variable": [
                { "key": "id", "value": "file-uuid-here" }
              ]
            },
            "description": "Returns a file record by ID."
          }
        },
        {
          "name": "Get Signed URL",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/:id/signed-url?expiresIn=3600",
              "host": ["{{baseUrl}}"],
              "path": ["files", ":id", "signed-url"],
              "variable": [
                { "key": "id", "value": "file-uuid-here" }
              ],
              "query": [
                { "key": "expiresIn", "value": "3600", "description": "Expiration time in seconds (default: 3600)" }
              ]
            },
            "description": "Generates a temporary signed URL for private file access."
          }
        },
        {
          "name": "Delete File",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/:id",
              "host": ["{{baseUrl}}"],
              "path": ["files", ":id"],
              "variable": [
                { "key": "id", "value": "file-uuid-here" }
              ]
            },
            "description": "Deletes a file from Supabase Storage and removes its record from the database."
          }
        }
      ]
    },
    {
      "name": "Audit Log",
      "item": [
        {
          "name": "List Audit Logs",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/audit-log?take=20&skip=0",
              "host": ["{{baseUrl}}"],
              "path": ["audit-log"],
              "query": [
                { "key": "take", "value": "20", "description": "Number of records per page" },
                { "key": "skip", "value": "0", "description": "Number of records to skip" },
                { "key": "userId", "value": "", "description": "Filter by user ID (UUID)", "disabled": true },
                { "key": "entityName", "value": "", "description": "Filter by entity name (e.g. User)", "disabled": true },
                { "key": "entityId", "value": "", "description": "Filter by entity ID (UUID)", "disabled": true },
                { "key": "action", "value": "", "description": "Filter by action: CREATE, UPDATE, DELETE", "disabled": true },
                { "key": "startDate", "value": "", "description": "Filter from date (ISO 8601)", "disabled": true },
                { "key": "endDate", "value": "", "description": "Filter to date (ISO 8601)", "disabled": true }
              ]
            },
            "description": "Returns a paginated list of audit logs with optional filters. Requires ADMIN or GLOBAL role."
          }
        },
        {
          "name": "Get Entity History",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/audit-log/entity/:entityName/:entityId",
              "host": ["{{baseUrl}}"],
              "path": ["audit-log", "entity", ":entityName", ":entityId"],
              "variable": [
                { "key": "entityName", "value": "User", "description": "Entity name (e.g. User, FeatureFlag)" },
                { "key": "entityId", "value": "entity-uuid-here", "description": "Entity ID (UUID)" }
              ]
            },
            "description": "Returns the full change history for a specific entity. Requires ADMIN or GLOBAL role."
          }
        },
        {
          "name": "Get User Activity",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/audit-log/user/:userId?take=50",
              "host": ["{{baseUrl}}"],
              "path": ["audit-log", "user", ":userId"],
              "variable": [
                { "key": "userId", "value": "user-uuid-here", "description": "User ID (UUID)" }
              ],
              "query": [
                { "key": "take", "value": "50", "description": "Number of records to return" }
              ]
            },
            "description": "Returns all audit log entries for a specific user. Requires ADMIN or GLOBAL role."
          }
        }
      ]
    }
  ]
}
